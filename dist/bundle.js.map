{"version":3,"sources":["../src/webpack/bootstrap a7186a33ea65195867d4","../src/./lib/shopify/index.js","../src/./lib/shopify/client.js","../src/external \"url\"","../src/external \"uuid\"","../src/external \"superagent\"","../src/./lib/shopify/session.js","../src/external \"lodash\"","../src/./lib/shopify/resources.js","../src/./lib/shopify/resources/index.js","../src/./lib/shopify/resources/application-charges.js","../src/./lib/shopify/resources/base.js","../src/external \"inflection\"","../src/./lib/shopify/resources/instance.js","../src/./lib/shopify/resources/blogs.js","../src/./lib/shopify/resources/carrier-services.js","../src/./lib/shopify/resources/checkouts.js","../src/./lib/shopify/errors.js","../src/./lib/shopify/resources/collects.js","../src/./lib/shopify/resources/comments.js","../src/./lib/shopify/resources/countries.js","../src/./lib/shopify/resources/custom-collections.js","../src/./lib/shopify/resources/customer-saved-searches.js","../src/./lib/shopify/resources/customers.js","../src/./lib/shopify/resources/discounts.js","../src/./lib/shopify/resources/events.js","../src/./lib/shopify/resources/fulfillment-services.js","../src/./lib/shopify/resources/gift-cards.js","../src/./lib/shopify/resources/locations.js","../src/./lib/shopify/resources/metafields.js","../src/./lib/shopify/resources/order-risks.js","../src/./lib/shopify/resources/orders.js","../src/./lib/shopify/resources/pages.js","../src/./lib/shopify/resources/policies.js","../src/./lib/shopify/resources/products.js","../src/./lib/shopify/resources/recurring-application-charges.js","../src/./lib/shopify/resources/redirects.js","../src/./lib/shopify/resources/shop.js","../src/./lib/shopify/resources/smart-collections.js","../src/./lib/shopify/resources/themes.js","../src/./lib/shopify/resources/users.js","../src/./lib/shopify/resources/webhooks.js","../src/./lib/shopify/middleware.js","../src/external \"crypto\"","../src/external \"path\""],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap a7186a33ea65195867d4\n **/","export { default as ShopifyClient } from './client'\nexport { default as ShopifyResources } from './resources'\nexport { default as ShopifyAuthMiddleware } from './middleware'\n\nexport {\n  OAuthSession as ShopifyOAuthSession,\n  PrivateSession as ShopifyPrivateSession\n} from './session'\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/shopify/index.js\n **/","import url              from 'url'\nimport uuid             from 'uuid'\nimport agent            from 'superagent'\nimport { OAuthSession } from './session'\n\nexport default class ShopifyClient {\n\n  methods = ['get', 'post', 'put', 'del']\n\n  oauth = false\n\n  defaults = {\n    resources: true\n  }\n\n  constructor(options) {\n    let opts = Object.assign({}, this.defaults, options)\n\n    if (!opts.session) {\n      throw new Error('Must provide a `Session`.')\n    }\n\n    if (opts.session instanceof OAuthSession) {\n      this.oauth = true;\n    }\n\n    this.session = opts.session;\n\n    for(let method of this.methods) {\n      this[method] = this.genericMethod.bind(this, method)\n    }\n  }\n\n  genericMethod(method, resource, opts) {\n    let request = this.buildRequest(method, resource, opts);\n    return this.makeRequest(request);\n  }\n\n  buildInstallUrl(redirectUri) {\n    let nonce = uuid.v4()\n    let uri = url.format({\n      protocol: 'https',\n      host: this.session.shop,\n      pathname: '/admin/oauth/authorize',\n      query: {\n        client_id: this.session.apiKey,\n        scope: this.session.scopes.join(','),\n        redirect_uri: url.format({\n          protocol: 'https',\n          host: this.session.host,\n          pathname: redirectUri\n        }),\n        state: nonce\n      }\n    })\n    return { uri, nonce }\n  }\n\n  buildUrl(resource, opts) {\n    let noSuffix = opts && opts.noSuffix;\n    let pathname = `/admin/${resource}${noSuffix ? '' : '.json'}`\n    let reqUrlFormat = {\n      protocol: 'https',\n      host: this.session.shop,\n      pathname: pathname\n    };\n\n    if (!this.oauth) {\n      reqUrlFormat.auth = `${this.session.apiKey}:${this.session.secret}`;\n    }\n\n    return url.format(reqUrlFormat);\n  }\n\n  buildRequest(method, resource, opts) {\n    let request = agent[method.toLowerCase()](this.buildUrl(resource));\n\n    if (opts && opts.params) {\n      request.query(opts.params)\n    }\n\n    if (opts && opts.data) {\n      request.send(opts.data)\n    }\n\n    if (this.oauth) {\n      if (this.session.access_token) {\n        request.set('X-Shopify-Access-Token', this.session.access_token);\n      } else {\n        throw new Error('Cannot make requests without `access_token`');\n      }\n    }\n\n    return request\n  }\n\n  getAccessToken(code) {\n    let url = this.buildUrl('oauth/access_token');\n    console.log(url)\n    let request = agent.post(url)\n    request.query({\n      client_id: this.session.apiKey,\n      client_secret: this.session.secret,\n      code: code\n    })\n    return this.makeRequest(request)\n  }\n\n  makeRequest(request) {\n    return new Promise((resolve, reject)=> {\n      request.end((err, res)=> {\n        if (err) {\n          reject(res.body || err);\n        } else {\n          resolve(res.body);\n        }\n      });\n    })\n  }\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/shopify/client.js\n **/","module.exports = require(\"url\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"url\"\n ** module id = 2\n ** module chunks = 0\n **/","module.exports = require(\"uuid\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"uuid\"\n ** module id = 3\n ** module chunks = 0\n **/","module.exports = require(\"superagent\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"superagent\"\n ** module id = 4\n ** module chunks = 0\n **/","import { merge } from 'lodash'\n\nexport class PrivateSession {\n  constructor(opts) {\n    this.host = opts.host;\n    this.apiKey = opts.apiKey;\n    this.secret = opts.secret;\n    this.shop = opts.shop;\n  }\n}\n\nexport class OAuthSession {\n  constructor(opts) {\n    this.host = opts.host;\n    this.apiKey = opts.apiKey;\n    this.secret = opts.secret;\n    this.shop = opts.shop;\n    this.access_token = opts.access_token;\n    this.scopes = opts.scopes;\n  }\n\n  update(opts) {\n    merge(this, opts);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/shopify/session.js\n **/","module.exports = require(\"lodash\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"lodash\"\n ** module id = 6\n ** module chunks = 0\n **/","import Client from './client'\nimport * as resources   from './resources/index'\n\nexport default class ShopifyResources {  \n  \n  defaults = {}\n\n  constructor(options) {\n    let opts = Object.assign({}, this.defaults, options);\n    if (!opts.session && !opts.client) {\n      throw new Error('Must provide a client or session.')\n    }\n\n    this.client = !opts.client \n      ? new Client({ session: opts.session })\n      : opts.client\n\n    this.buildResources();\n  }\n\n  updateSession(session) {\n    this.client.updateSession(session);\n  }\n\n  buildResources() {\n    Object.keys(resources).forEach((r)=> {\n      let opts = { client: this.client };\n      let Resource = resources[r];\n      this[r] = new Resource(opts);\n      // if (this[r].metafields) {\n      //   opts.resourcePrefix = `${this[r].resourceName}/`\n      //   this[r].Metafields = new resources.Metafields()\n      // }\n    })\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./lib/shopify/resources.js\n **/","export ApplicationCharges             from './application-charges'\nexport Blogs                          from './blogs'\nexport CarrierServices                from './carrier-services'\nexport Checkouts                      from './checkouts'\nexport Collects                       from './collects'\nexport Comments                       from './comments'\nexport Countries                      from './countries'\nexport CustomCollections              from './custom-collections'\nexport CustomerSavedSearches          from './customer-saved-searches'\nexport Customers                      from './customers'\nexport Discounts                      from './discounts'\nexport Events                         from './events'\nexport FulfillmentServices            from './fulfillment-services'\nexport GiftCards                      from './gift-cards'\nexport Locations                      from './locations'\nexport Metafields                     from './metafields'\nexport OrderRisks                     from './order-risks'\nexport Orders                         from './orders'\nexport Pages                          from './pages'\nexport Policies                       from './policies'\nexport Products                       from './products'\nexport RecurringApplicationCharges    from './recurring-application-charges'\nexport Redirects                      from './redirects'\nexport Shop                           from './shop'\nexport SmartCollections               from './smart-collections'\nexport Themes                         from './themes'\nexport Users                          from './users'\nexport Webhooks                       from './webhooks'\n\n\n/** WEBPACK FOOTER **\n ** ./lib/shopify/resources/index.js\n **/","import Resource from './base'\n\nexport default class ApplicationChargesResource extends Resource {\n  resourceName = 'application_charges'\n}\n\n\n/** WEBPACK FOOTER **\n ** ./lib/shopify/resources/application-charges.js\n **/","import inflection from 'inflection'\nimport { map } from 'lodash'\nimport InstanceClass from './instance'\n\nvar test = new InstanceClass()\nconsole.log(test.attrs, test.set(\"foo\", 'bar'), test.get('foo'))\n\n\nexport default class Resource {\n\n  constructor(opts) {\n    this.opts = opts;\n    this.resourceName = opts.resourceName;\n    this.client = opts.client;\n    this.resourcePrefix = opts.resourcePrefix || null;\n    this.resourceSuffix = opts.resourceSuffix || null;\n    // this.InstanceClass =\n\n    // (hack) Define this prop after the\n    // extending constructor is done\n    process.nextTick(()=> {\n      this.resourceSingularName =\n        opts.resourceSingularName || inflection.singularize(this.resourceName)\n    })\n  }\n\n  _wrapInstances(data) {\n    if (Array.isArray(data)) {\n      return map(data, this.build.bind(this))\n    } else {\n      return this.build(data)\n    }\n  }\n\n  _buildResource() {\n    let resource = ''\n    if (this.resourcePrefix) resource += this.resourcePrefix + '/'\n    resource += this.resourceName\n    if (this.resourceSuffix) resource += '/' + this.resourceSuffix\n    return resource;\n  }\n\n  build(id, data) {\n    if (!data && typeof id !== 'number') {\n      data = id;\n    }\n    if (typeof id === 'number') {\n      data = data || {}\n      data.id = id;\n    }\n\n    return new this.InstanceClass(data, this.opts);\n  }\n\n  findAll(opts) {\n    let resource = this._buildResource();\n    return this.client.get(resource, { params: opts })\n      .then(extractResource(resource))\n      .then(this._wrapInstances.bind(this))\n  }\n\n  getOne(id, opts) {\n    let resource = this._buildResource();\n    let payload = { params: opts };\n\n\n    if (this.singular && typeof id !== 'number') {\n      opts = id;\n      id = null;\n    }\n\n    else if (typeof id !== 'number') {\n      throw new ArgumentError()\n    }\n\n\n    if (id) {\n      resource += `/${id}`;\n    }\n\n    return this.client.get(resource, payload)\n      .then(extractResource(this.resourceSingularName))\n      .then(this._wrapInstances.bind(this))\n  }\n\n  count(opts) {\n    let resource = `${this._buildResource()}/count`;\n    let payload = { params: opts };\n    return this.client.get(resource)\n      .then(extractResource('count'))\n  }\n\n  create(data, opts) {\n    let resource = this._buildResource();\n    let payload = {\n      data: { [this.resourceSingularName]: data },\n      params: opts\n    };\n    return this.client.post(resource, payload)\n      .then(extractResource(this.resourceSingularName))\n      .then(this._wrapInstances.bind(this))\n  }\n\n  update(id, data, opts) {\n    let resource = `${this._buildResource()}/${id}`;\n    let payload = {\n      data: { [this.resourceSingularName]: data },\n      params: opts\n    }\n    return this.client.put(resource, payload)\n      .then(extractResource(this.resourceSingularName))\n      .then(this._wrapInstances.bind(this))\n  }\n\n  remove(id, opts) {\n    let resource = `${this._buildResource()}/${id}`;\n    let payload = { params: opts };\n    return this.client.del(resource, payload)\n      .then(()=> {\n        return { deleted: true }\n      })\n  }\n\n}\n\nfunction extractResource(resource) {\n  return function(data) {\n    return data[resource];\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/shopify/resources/base.js\n **/","module.exports = require(\"inflection\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"inflection\"\n ** module id = 11\n ** module chunks = 0\n **/","\nexport default InstanceClass = new Map([])\n\nInstanceClass.attrs\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/shopify/resources/instance.js\n **/","import Resource from './base'\n\nexport default class BlogResource extends Resource {\n  resourceName = 'blogs'\n}\n\n\n/** WEBPACK FOOTER **\n ** ./lib/shopify/resources/blogs.js\n **/","import Resource from './base'\n\nexport default class CarrierServicesResource extends Resource {\n  resourceName = 'carrier_services'\n}\n\n\n/** WEBPACK FOOTER **\n ** ./lib/shopify/resources/carrier-services.js\n **/","import Resource from './base'\nimport { NotImplementedError }  from '../errors'\n\nexport default class CheckoutResource extends Resource {\n  resourceName = 'checkouts'\n\n  get() {\n    throw new NotImplementedError()\n  }\n\n  update() {\n    throw new NotImplementedError()\n  }\n\n  create() {\n    throw new NotImplementedError()\n  }\n\n  remove() {\n    throw new NotImplementedError()\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./lib/shopify/resources/checkouts.js\n **/","\nexport class NotImplementedError extends Error {\n  name = 'NotImplementedError'\n  message = 'Not implemented in this lib or Shopify.'\n  stack = (new Error()).stack;\n}\n\nexport class ArgumentError extends Error {\n  name = 'ArgumentError'\n  message = 'Called with illegal arguments'\n  stack = (new Error()).stack;\n}\n\n\n/** WEBPACK FOOTER **\n ** ./lib/shopify/errors.js\n **/","import Resource from './base'\n\nexport default class CollectsResource extends Resource {\n  resourceName = 'collects'\n}\n\n\n/** WEBPACK FOOTER **\n ** ./lib/shopify/resources/collects.js\n **/","import Resource from './base'\nimport { ArgumentError }  from '../errors'\n\nexport default class CommentsResource extends Resource {\n  resourceName = 'comments'\n\n  getAll(opts = {}) {\n    if (!opts.article_id || !opts.blog_id) {\n      throw new ArgumentError()\n    }\n    return super.getAll(opts);\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./lib/shopify/resources/comments.js\n **/","import Resource from './base'\n\nexport default class CountriesResource extends Resource {\n  resourceName = 'countries'\n}\n\n\n/** WEBPACK FOOTER **\n ** ./lib/shopify/resources/countries.js\n **/","import Resource from './base'\n\nexport default class CustomCollectionsResource extends Resource {\n  resourceName = 'custom_collections'\n  metafields = true \n}\n\n\n/** WEBPACK FOOTER **\n ** ./lib/shopify/resources/custom-collections.js\n **/","import Resource from './base'\n\nexport default class CustomerSavedSearchesResource extends Resource {\n  resourceName = 'customer_saved_searches'\n}\n\n\n/** WEBPACK FOOTER **\n ** ./lib/shopify/resources/customer-saved-searches.js\n **/","import Resource from './base'\n\nexport default class CustomersResource extends Resource {\n  resourceName = 'customers'\n}\n\n\n/** WEBPACK FOOTER **\n ** ./lib/shopify/resources/customers.js\n **/","import Resource from './base'\n\nexport default class DiscountsResource extends Resource {\n  resourceName = 'discounts'\n}\n\n\n/** WEBPACK FOOTER **\n ** ./lib/shopify/resources/discounts.js\n **/","import Resource from './base'\n\nexport default class EventsResource extends Resource {\n  resourceName = 'events'\n}\n\n\n/** WEBPACK FOOTER **\n ** ./lib/shopify/resources/events.js\n **/","import Resource from './base'\n\nexport default class FulfillmentServicesResource extends Resource {\n  resourceName = 'fulfillment_services'\n}\n\n\n/** WEBPACK FOOTER **\n ** ./lib/shopify/resources/fulfillment-services.js\n **/","import Resource from './base'\n\nexport default class GiftCardsResource extends Resource {\n  resourceName = 'gift_cards'\n}\n\n\n/** WEBPACK FOOTER **\n ** ./lib/shopify/resources/gift-cards.js\n **/","import Resource from './base'\n\nexport default class LocationsResource extends Resource {\n  resourceName = 'locations'\n}\n\n\n/** WEBPACK FOOTER **\n ** ./lib/shopify/resources/locations.js\n **/","import Resource from './base'\n\nexport default class MetafieldsResource extends Resource {\n  resourceName = 'metafields'\n}\n\n\n/** WEBPACK FOOTER **\n ** ./lib/shopify/resources/metafields.js\n **/","import Resource from './base'\n\nexport default class OrderRisksResource extends Resource {\n  resourceName = 'order_risks'\n}\n\n\n/** WEBPACK FOOTER **\n ** ./lib/shopify/resources/order-risks.js\n **/","import Resource from './base'\n\nexport default class OrdersResource extends Resource {\n  resourceName = 'orders'\n}\n\n\n/** WEBPACK FOOTER **\n ** ./lib/shopify/resources/orders.js\n **/","import Resource from './base'\n\nexport default class PagesResource extends Resource {\n  resourceName = 'pages'\n}\n\n\n/** WEBPACK FOOTER **\n ** ./lib/shopify/resources/pages.js\n **/","import Resource from './base'\n\nexport default class PoliciesResource extends Resource {\n  resourceName = 'policies'\n}\n\n\n/** WEBPACK FOOTER **\n ** ./lib/shopify/resources/policies.js\n **/","import Resource from './base'\n\nexport default class ProductResource extends Resource {\n  resourceName = 'products'\n}\n\n\n/** WEBPACK FOOTER **\n ** ./lib/shopify/resources/products.js\n **/","import Resource from './base'\n\nexport default class RecurringApplicationChargesResource extends Resource {\n  resourceName = 'recurring_application_charges'\n}\n\n\n/** WEBPACK FOOTER **\n ** ./lib/shopify/resources/recurring-application-charges.js\n **/","import Resource from './base'\n\nexport default class RedirectsResource extends Resource {\n  resourceName = 'redirects'\n}\n\n\n/** WEBPACK FOOTER **\n ** ./lib/shopify/resources/redirects.js\n **/","import Resource from './base'\n\nexport default class ShopResource extends Resource {\n  singular = true\n  resourceName = 'shop'\n}\n\n\n/** WEBPACK FOOTER **\n ** ./lib/shopify/resources/shop.js\n **/","import Resource from './base'\n\nexport default class SmartCollectionsResource extends Resource {\n  metafields = true \n  resourceName = 'smart_collections'\n}\n\n\n/** WEBPACK FOOTER **\n ** ./lib/shopify/resources/smart-collections.js\n **/","import Resource from './base'\n\nexport default class ThemesResource extends Resource {\n  resourceName = 'themes'\n}\n\n\n/** WEBPACK FOOTER **\n ** ./lib/shopify/resources/themes.js\n **/","import Resource from './base'\n\nexport default class UsersResource extends Resource {\n  resourceName = 'users'\n}\n\n\n/** WEBPACK FOOTER **\n ** ./lib/shopify/resources/users.js\n **/","import Resource from './base'\n\nexport default class WebhooksResource extends Resource {\n  resourceName = 'webhooks'\n}\n\n\n/** WEBPACK FOOTER **\n ** ./lib/shopify/resources/webhooks.js\n **/","import crypto from 'crypto'\nimport path from 'path'\nimport url from 'url'\nimport ShopifyClient from './client'\nimport ShopifyResources from './resources'\nimport { OAuthSession } from './session'\nimport {\n  merge,\n  union,\n  startsWith,\n  omit,\n  reduce,\n  chain\n} from 'lodash'\n\nconst noop = function() {}\n\nconst defaults = {\n  resources: true,\n  autoInstall: true,\n  applicationBase: '/',\n  applicationInstall: '/install',\n  applicationInstallCallback: '/install/callback',\n  routes: {\n    unauthorized: '/unauthorized',\n    didInstall: '/'\n  },\n  webhooksBase: '/api/webhooks',\n  webhooks: ['app/uninstalled'],\n  willInstall: noop,\n  willUninstall: noop,\n  didInstall: noop\n}\n\nexport default class ShopifyAuthMiddleware {\n\n  constructor(opts) {\n    this.opts = merge({}, defaults, opts);\n    // Merge doesn't merge arrays :P\n    if (opts.webhooks) {\n      this.opts.webhooks = union(defaults.webhooks, opts.webhooks)\n    }\n  }\n\n  callback() {\n    return this.handler.bind(this)\n  }\n\n  handler(req, res, next) {\n    const o = this.opts\n    const pUrl = req._parsedUrl\n    const { shop } = req.query\n    const installing = startsWith(pUrl.pathname, o.applicationInstall)\n    const installingCallback = startsWith(pUrl.pathname, o.applicationInstallCallback)\n    const withinApp = startsWith(pUrl.pathname, o.applicationBase)\n    let session = null\n\n    if (installing || installingCallback || withinApp) {\n      if (!this.verifyRequest(req.query)) {\n        return res.sendStatus(401)\n      }\n\n      session = new OAuthSession({\n        host: o.host,\n        apiKey: o.apiKey,\n        secret: o.secret,\n        shop: shop,\n        scopes: o.scopes\n      })\n\n      res.locals.client = new ShopifyClient({ session })\n\n      if (installingCallback) {\n        return this.installCallback(req, res, next);\n      }\n\n      if (installing) {\n        return this.install(req, res, next)\n      }\n\n      return o.willAuthenticate(shop, (tenant)=> {\n        if (!tenant || !tenant.access_token) {\n          if (o.autoInstall) {\n            return res.redirect(o.applicationInstall + pUrl.search);\n          }\n          return next();\n        }\n\n        session.update({\n          access_token: tenant.access_token\n        })\n\n        next();\n      })\n    }\n\n    next();\n  }\n\n  install(req, res, next) {\n    const o = this.opts\n    const { client } = res.locals\n    const { shop } = req.query\n    const { uri, nonce } = client.buildInstallUrl(\n      o.applicationInstallCallback,\n      { noSuffix: true }\n    )\n\n    if (uri) {\n      return o.willInstall(shop, nonce, ()=> {\n        res.redirect(uri)\n      })\n    }\n\n    next()\n  }\n\n  installCallback(req, res, next) {\n    const o = this.opts\n    const { client } = res.locals\n    const { shop, code, state } = req.query\n    o.willAuthenticate(shop, (tenant)=> {\n      if (tenant.nonce === state) {\n        return client.getAccessToken(code).then(({ access_token })=> {\n          o.didInstall(shop, code, access_token, ()=> {\n            res.redirect(this.buildAppUrl(shop) + o.routes.didInstall)\n          })\n        })\n      }\n      res.sendStatus(401)\n    })\n  }\n\n  buildAppUrl(shop) {\n    return url.format({\n      protocol: 'https',\n      host: shop,\n      pathname: `/admin/apps/${this.opts.listingHandle || this.opts.apiKey}`\n    })\n  }\n\n  verifyRequest(query) {\n    const { hmac } = query;\n    const hash = crypto.createHmac('sha256', this.opts.secret);\n    const message = chain(query)\n      .omit(['hmac', 'signature'])\n      .keys()\n      .sortBy() //alphabetical\n      .reduce((msg, key)=> {\n        if (msg.length) msg += '&'\n        msg += key + '=' + query[key]\n                             .replace(/\\%/g, '%25')\n                             .replace(/\\=/g, '%3D')\n                             .replace(/\\&/g, '%26')\n        return msg;\n      }, '')\n      .value()\n\n    hash.update(message);\n\n    return (hmac === hash.digest('hex'));\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/shopify/middleware.js\n **/","module.exports = require(\"crypto\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"crypto\"\n ** module id = 42\n ** module chunks = 0\n **/","module.exports = require(\"path\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"path\"\n ** module id = 43\n ** module chunks = 0\n **/"],"sourceRoot":""}